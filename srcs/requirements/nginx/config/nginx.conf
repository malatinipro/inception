
	# upstream wordpress {
	# 		server wordpress:9000;
	# 	}

# events {
# 	worker_connections 1024;
# }

#http {
		#upstream wordpress {
		#	server wordpress:9000;
		#}
	
	# Minimum necessaire pour servir nos pages php wordpress
	# server {
	# 	# Definition du nom de domaine comme demande dans le sujet
	# 	server_name	malatini.42.fr;

	# 	# Ecoute en ssl uniquement 
	# 	listen 443 ssl;
	# 	listen [::]:443 ssl;

	# 	# On note le cert et la key (necessaire protocole ssl)
	# 	ssl_certificate		/etc/nginx/ssl/malatini.42.fr.crt;
	# 	ssl_certificate_key	/etc/nginx/ssl/malatini.42.fr.key;

	# 	# Protocole d'encryptions pour les cles ssl
	# 	ssl_protocols		TLSv1.2 TLSv1.3;

	# 	# Fichiers a afficher et dossier ou les chercher
	# 	root /var/www/wordpress;
	# 	index index.php index.html;

	# 	# Directive necessaire pour les endpoints, 
	# 	# Fast cgi necessaire pour nginx pour "traduire" le php
	# 	# location / {
	# 	# 	location ~ \.php$ {
	# 	# 		fastcgi_split_path_info ^(.+\.php)(/.+)$;
	# 	# 		fastcgi_pass wordpress:9000;
	# 	# 		fastcgi_index index.php;
	# 	# 		include fastcgi_params;
	# 	# 		fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
	# 	# 		fastcgi_param SCRIPT_NAME $fastcgi_script_name;
	# 	# 	}
	# 	# }

	# 	location / {
	# 		try_files $uri $uri/ =404;
	# 	}


	# 	location ~ \.php$ {
	# 		fastcgi_split_path_info ^(.+\.php)(/.+)$;
	# 		fastcgi_pass wordpress:9000;
	# 		fastcgi_index index.php;
	# 		include fastcgi_params;
	# 		fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
	# 		fastcgi_param SCRIPT_NAME $fastcgi_script_name;
    #     }
	# }
#}

# events {
# 	worker_connections 1024;
# }

# http {
		# upstream wordpress {
		# 	server wordpress:9000;
		# }

		#upstream sitegta {
		#	server sitegta:7000;
		#}

		server {
			listen 443 ssl;
			listen [::]:443 ssl;
			server_name malatini.42.fr;
			#include  /etc/nginx/mime.types;

			root /var/www/wordpress;
			index index.php index.html;
			ssl_protocols TLSv1.2 TLSv1.3;

			ssl_certificate /etc/nginx/ssl/malatini.crt;
			ssl_certificate_key /etc/nginx/ssl/malatini.key;

		location / {
			try_files $uri $uri/ =404;
		}


		location ~ \.php$ {
			fastcgi_split_path_info ^(.+\.php)(/.+)$;
			fastcgi_pass wordpress:9000;
			fastcgi_index index.php;
			include fastcgi_params;
			fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
			fastcgi_param SCRIPT_NAME $fastcgi_script_name;
        }
    }
# }